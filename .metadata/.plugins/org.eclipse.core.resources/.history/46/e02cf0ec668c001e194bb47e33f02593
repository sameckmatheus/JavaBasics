package entregas;

import java.util.ArrayList;
import java.util.List;
import java.util.Random;
import java.util.Scanner;

public class JogoDaForca2 {
    private static final String[] PALAVRAS = {"casa", "carro", "computador", "telefone", "escola"};
    private static final String[] FORCA = {" O", "/|\\", "/ \\"};
    private static final int MAX_TENTATIVAS = 6;

    private String palavra;
    private char[] palavraEscondida;
    private List<Character> letrasTentadas;
    private int tentativasRestantes;

    public JogoDaForca2() {
        Random random = new Random();
        int indice = random.nextInt(PALAVRAS.length);
        palavra = PALAVRAS[indice];
        palavraEscondida = new char[palavra.length()];
        for (int i = 0; i < palavra.length(); i++) {
            palavraEscondida[i] = '-';
        }
        letrasTentadas = new ArrayList<>();
        tentativasRestantes = MAX_TENTATIVAS;
    }

    public void jogar() {
        Scanner scanner = new Scanner(System.in);
        System.out.println("Bem-vindo ao Jogo da Forca!");
        exibirForca();
        while (tentativasRestantes > 0 && !jogoFinalizado()) {
            System.out.println("Digite uma letra ou chute a palavra: ");
            String entrada = scanner.nextLine().toLowerCase();
            if (entrada.length() == 1) {
                char letra = entrada.charAt(0);
                if (letrasTentadas.contains(letra)) {
                    System.out.println("A letra '" + letra + "' já foi tentada.");
                } else {
                    letrasTentadas.add(letra);
                    boolean encontrouLetra = false;
                    for (int i = 0; i < palavra.length(); i++) {
                        if (palavra.charAt(i) == letra) {
                            encontrouLetra = true;
                            palavraEscondida[i] = letra;
                        }
                    }
                    if (encontrouLetra) {
                        System.out.println("Você acertou a letra!");
                    } else {
                        System.out.println("Você errou a letra.");
                        tentativasRestantes--;
                    }
                }
            } else {
                if (entrada.equals(palavra)) {
                    palavraEscondida = palavra.toCharArray();
                } else {
                    tentativasRestantes--;
                    System.out.println("Você errou o chute.");
                }
            }
            exibirForca();
            exibirLetrasTentadas();
        }
        if (jogoFinalizado() && tentativasRestantes > 0) {
            System.out.println("Parabéns, você acertou a palavra!");
        } else {
            System.out.println("Que pena, você não conseguiu acertar a palavra. A palavra correta era '" + palavra + "'.");
        }
        scanner.close();
    }

    private void exibirForca() {
        System.out.println();
        for (int i = MAX_TENTATIVAS - tentativasRestantes; i < FORCA.length; i++) {
            System.out.println(FORCA[i]);
        }
        System.out.println();
        for (char letra : palavraEscondida) {
            System.out.print(letra + " ");
        }
        System.out.println("\n");
    }

    private void exibirLetrasTentadas() {
        System.out.println("Letras tentadas: ");
        for (char letra : letrasTentadas) {
            System.out.print(letra + " ");
        }
        System.out.println("\n");
    }

    private boolean jogoFinalizado() {
        return palavra.equals(String.valueOf(palavraEscondida));
    }

    public static void main(String[] args) {
        JogoDaForca2 jogo = new JogoDaForca2();
        jogo.jogar();
    }
}
